{"ast":null,"code":"/**\n * Outlayer Item\n */\n(function (window, factory) {\n  // universal module definition\n\n  /* jshint strict: false */\n\n  /* globals define, module, require */\n  if (typeof define == 'function' && define.amd) {\n    // AMD - RequireJS\n    define(['ev-emitter/ev-emitter', 'get-size/get-size'], factory);\n  } else if (typeof module == 'object' && module.exports) {\n    // CommonJS - Browserify, Webpack\n    module.exports = factory(require('ev-emitter'), require('get-size'));\n  } else {\n    // browser global\n    window.Outlayer = {};\n    window.Outlayer.Item = factory(window.EvEmitter, window.getSize);\n  }\n})(window, function factory(EvEmitter, getSize) {\n  'use strict'; // ----- helpers ----- //\n\n  function isEmptyObj(obj) {\n    for (var prop in obj) {\n      return false;\n    }\n\n    prop = null;\n    return true;\n  } // -------------------------- CSS3 support -------------------------- //\n\n\n  var docElemStyle = document.documentElement.style;\n  var transitionProperty = typeof docElemStyle.transition == 'string' ? 'transition' : 'WebkitTransition';\n  var transformProperty = typeof docElemStyle.transform == 'string' ? 'transform' : 'WebkitTransform';\n  var transitionEndEvent = {\n    WebkitTransition: 'webkitTransitionEnd',\n    transition: 'transitionend'\n  }[transitionProperty]; // cache all vendor properties that could have vendor prefix\n\n  var vendorProperties = {\n    transform: transformProperty,\n    transition: transitionProperty,\n    transitionDuration: transitionProperty + 'Duration',\n    transitionProperty: transitionProperty + 'Property',\n    transitionDelay: transitionProperty + 'Delay'\n  }; // -------------------------- Item -------------------------- //\n\n  function Item(element, layout) {\n    if (!element) {\n      return;\n    }\n\n    this.element = element; // parent layout class, i.e. Masonry, Isotope, or Packery\n\n    this.layout = layout;\n    this.position = {\n      x: 0,\n      y: 0\n    };\n\n    this._create();\n  } // inherit EvEmitter\n\n\n  var proto = Item.prototype = Object.create(EvEmitter.prototype);\n  proto.constructor = Item;\n\n  proto._create = function () {\n    // transition objects\n    this._transn = {\n      ingProperties: {},\n      clean: {},\n      onEnd: {}\n    };\n    this.css({\n      position: 'absolute'\n    });\n  }; // trigger specified handler for event type\n\n\n  proto.handleEvent = function (event) {\n    var method = 'on' + event.type;\n\n    if (this[method]) {\n      this[method](event);\n    }\n  };\n\n  proto.getSize = function () {\n    this.size = getSize(this.element);\n  };\n  /**\n   * apply CSS styles to element\n   * @param {Object} style\n   */\n\n\n  proto.css = function (style) {\n    var elemStyle = this.element.style;\n\n    for (var prop in style) {\n      // use vendor property if available\n      var supportedProp = vendorProperties[prop] || prop;\n      elemStyle[supportedProp] = style[prop];\n    }\n  }; // measure position, and sets it\n\n\n  proto.getPosition = function () {\n    var style = getComputedStyle(this.element);\n\n    var isOriginLeft = this.layout._getOption('originLeft');\n\n    var isOriginTop = this.layout._getOption('originTop');\n\n    var xValue = style[isOriginLeft ? 'left' : 'right'];\n    var yValue = style[isOriginTop ? 'top' : 'bottom'];\n    var x = parseFloat(xValue);\n    var y = parseFloat(yValue); // convert percent to pixels\n\n    var layoutSize = this.layout.size;\n\n    if (xValue.indexOf('%') != -1) {\n      x = x / 100 * layoutSize.width;\n    }\n\n    if (yValue.indexOf('%') != -1) {\n      y = y / 100 * layoutSize.height;\n    } // clean up 'auto' or other non-integer values\n\n\n    x = isNaN(x) ? 0 : x;\n    y = isNaN(y) ? 0 : y; // remove padding from measurement\n\n    x -= isOriginLeft ? layoutSize.paddingLeft : layoutSize.paddingRight;\n    y -= isOriginTop ? layoutSize.paddingTop : layoutSize.paddingBottom;\n    this.position.x = x;\n    this.position.y = y;\n  }; // set settled position, apply padding\n\n\n  proto.layoutPosition = function () {\n    var layoutSize = this.layout.size;\n    var style = {};\n\n    var isOriginLeft = this.layout._getOption('originLeft');\n\n    var isOriginTop = this.layout._getOption('originTop'); // x\n\n\n    var xPadding = isOriginLeft ? 'paddingLeft' : 'paddingRight';\n    var xProperty = isOriginLeft ? 'left' : 'right';\n    var xResetProperty = isOriginLeft ? 'right' : 'left';\n    var x = this.position.x + layoutSize[xPadding]; // set in percentage or pixels\n\n    style[xProperty] = this.getXValue(x); // reset other property\n\n    style[xResetProperty] = ''; // y\n\n    var yPadding = isOriginTop ? 'paddingTop' : 'paddingBottom';\n    var yProperty = isOriginTop ? 'top' : 'bottom';\n    var yResetProperty = isOriginTop ? 'bottom' : 'top';\n    var y = this.position.y + layoutSize[yPadding]; // set in percentage or pixels\n\n    style[yProperty] = this.getYValue(y); // reset other property\n\n    style[yResetProperty] = '';\n    this.css(style);\n    this.emitEvent('layout', [this]);\n  };\n\n  proto.getXValue = function (x) {\n    var isHorizontal = this.layout._getOption('horizontal');\n\n    return this.layout.options.percentPosition && !isHorizontal ? x / this.layout.size.width * 100 + '%' : x + 'px';\n  };\n\n  proto.getYValue = function (y) {\n    var isHorizontal = this.layout._getOption('horizontal');\n\n    return this.layout.options.percentPosition && isHorizontal ? y / this.layout.size.height * 100 + '%' : y + 'px';\n  };\n\n  proto._transitionTo = function (x, y) {\n    this.getPosition(); // get current x & y from top/left\n\n    var curX = this.position.x;\n    var curY = this.position.y;\n    var didNotMove = x == this.position.x && y == this.position.y; // save end position\n\n    this.setPosition(x, y); // if did not move and not transitioning, just go to layout\n\n    if (didNotMove && !this.isTransitioning) {\n      this.layoutPosition();\n      return;\n    }\n\n    var transX = x - curX;\n    var transY = y - curY;\n    var transitionStyle = {};\n    transitionStyle.transform = this.getTranslate(transX, transY);\n    this.transition({\n      to: transitionStyle,\n      onTransitionEnd: {\n        transform: this.layoutPosition\n      },\n      isCleaning: true\n    });\n  };\n\n  proto.getTranslate = function (x, y) {\n    // flip cooridinates if origin on right or bottom\n    var isOriginLeft = this.layout._getOption('originLeft');\n\n    var isOriginTop = this.layout._getOption('originTop');\n\n    x = isOriginLeft ? x : -x;\n    y = isOriginTop ? y : -y;\n    return 'translate3d(' + x + 'px, ' + y + 'px, 0)';\n  }; // non transition + transform support\n\n\n  proto.goTo = function (x, y) {\n    this.setPosition(x, y);\n    this.layoutPosition();\n  };\n\n  proto.moveTo = proto._transitionTo;\n\n  proto.setPosition = function (x, y) {\n    this.position.x = parseFloat(x);\n    this.position.y = parseFloat(y);\n  }; // ----- transition ----- //\n\n  /**\n   * @param {Object} style - CSS\n   * @param {Function} onTransitionEnd\n   */\n  // non transition, just trigger callback\n\n\n  proto._nonTransition = function (args) {\n    this.css(args.to);\n\n    if (args.isCleaning) {\n      this._removeStyles(args.to);\n    }\n\n    for (var prop in args.onTransitionEnd) {\n      args.onTransitionEnd[prop].call(this);\n    }\n  };\n  /**\n   * proper transition\n   * @param {Object} args - arguments\n   *   @param {Object} to - style to transition to\n   *   @param {Object} from - style to start transition from\n   *   @param {Boolean} isCleaning - removes transition styles after transition\n   *   @param {Function} onTransitionEnd - callback\n   */\n\n\n  proto.transition = function (args) {\n    // redirect to nonTransition if no transition duration\n    if (!parseFloat(this.layout.options.transitionDuration)) {\n      this._nonTransition(args);\n\n      return;\n    }\n\n    var _transition = this._transn; // keep track of onTransitionEnd callback by css property\n\n    for (var prop in args.onTransitionEnd) {\n      _transition.onEnd[prop] = args.onTransitionEnd[prop];\n    } // keep track of properties that are transitioning\n\n\n    for (prop in args.to) {\n      _transition.ingProperties[prop] = true; // keep track of properties to clean up when transition is done\n\n      if (args.isCleaning) {\n        _transition.clean[prop] = true;\n      }\n    } // set from styles\n\n\n    if (args.from) {\n      this.css(args.from); // force redraw. http://blog.alexmaccaw.com/css-transitions\n\n      var h = this.element.offsetHeight; // hack for JSHint to hush about unused var\n\n      h = null;\n    } // enable transition\n\n\n    this.enableTransition(args.to); // set styles that are transitioning\n\n    this.css(args.to);\n    this.isTransitioning = true;\n  }; // dash before all cap letters, including first for\n  // WebkitTransform => -webkit-transform\n\n\n  function toDashedAll(str) {\n    return str.replace(/([A-Z])/g, function ($1) {\n      return '-' + $1.toLowerCase();\n    });\n  }\n\n  var transitionProps = 'opacity,' + toDashedAll(transformProperty);\n\n  proto.enableTransition = function ()\n  /* style */\n  {\n    // HACK changing transitionProperty during a transition\n    // will cause transition to jump\n    if (this.isTransitioning) {\n      return;\n    } // make `transition: foo, bar, baz` from style object\n    // HACK un-comment this when enableTransition can work\n    // while a transition is happening\n    // var transitionValues = [];\n    // for ( var prop in style ) {\n    //   // dash-ify camelCased properties like WebkitTransition\n    //   prop = vendorProperties[ prop ] || prop;\n    //   transitionValues.push( toDashedAll( prop ) );\n    // }\n    // munge number to millisecond, to match stagger\n\n\n    var duration = this.layout.options.transitionDuration;\n    duration = typeof duration == 'number' ? duration + 'ms' : duration; // enable transition styles\n\n    this.css({\n      transitionProperty: transitionProps,\n      transitionDuration: duration,\n      transitionDelay: this.staggerDelay || 0\n    }); // listen for transition end event\n\n    this.element.addEventListener(transitionEndEvent, this, false);\n  }; // ----- events ----- //\n\n\n  proto.onwebkitTransitionEnd = function (event) {\n    this.ontransitionend(event);\n  };\n\n  proto.onotransitionend = function (event) {\n    this.ontransitionend(event);\n  }; // properties that I munge to make my life easier\n\n\n  var dashedVendorProperties = {\n    '-webkit-transform': 'transform'\n  };\n\n  proto.ontransitionend = function (event) {\n    // disregard bubbled events from children\n    if (event.target !== this.element) {\n      return;\n    }\n\n    var _transition = this._transn; // get property name of transitioned property, convert to prefix-free\n\n    var propertyName = dashedVendorProperties[event.propertyName] || event.propertyName; // remove property that has completed transitioning\n\n    delete _transition.ingProperties[propertyName]; // check if any properties are still transitioning\n\n    if (isEmptyObj(_transition.ingProperties)) {\n      // all properties have completed transitioning\n      this.disableTransition();\n    } // clean style\n\n\n    if (propertyName in _transition.clean) {\n      // clean up style\n      this.element.style[event.propertyName] = '';\n      delete _transition.clean[propertyName];\n    } // trigger onTransitionEnd callback\n\n\n    if (propertyName in _transition.onEnd) {\n      var onTransitionEnd = _transition.onEnd[propertyName];\n      onTransitionEnd.call(this);\n      delete _transition.onEnd[propertyName];\n    }\n\n    this.emitEvent('transitionEnd', [this]);\n  };\n\n  proto.disableTransition = function () {\n    this.removeTransitionStyles();\n    this.element.removeEventListener(transitionEndEvent, this, false);\n    this.isTransitioning = false;\n  };\n  /**\n   * removes style property from element\n   * @param {Object} style\n  **/\n\n\n  proto._removeStyles = function (style) {\n    // clean up transition styles\n    var cleanStyle = {};\n\n    for (var prop in style) {\n      cleanStyle[prop] = '';\n    }\n\n    this.css(cleanStyle);\n  };\n\n  var cleanTransitionStyle = {\n    transitionProperty: '',\n    transitionDuration: '',\n    transitionDelay: ''\n  };\n\n  proto.removeTransitionStyles = function () {\n    // remove transition\n    this.css(cleanTransitionStyle);\n  }; // ----- stagger ----- //\n\n\n  proto.stagger = function (delay) {\n    delay = isNaN(delay) ? 0 : delay;\n    this.staggerDelay = delay + 'ms';\n  }; // ----- show/hide/remove ----- //\n  // remove element from DOM\n\n\n  proto.removeElem = function () {\n    this.element.parentNode.removeChild(this.element); // remove display: none\n\n    this.css({\n      display: ''\n    });\n    this.emitEvent('remove', [this]);\n  };\n\n  proto.remove = function () {\n    // just remove element if no transition support or no transition\n    if (!transitionProperty || !parseFloat(this.layout.options.transitionDuration)) {\n      this.removeElem();\n      return;\n    } // start transition\n\n\n    this.once('transitionEnd', function () {\n      this.removeElem();\n    });\n    this.hide();\n  };\n\n  proto.reveal = function () {\n    delete this.isHidden; // remove display: none\n\n    this.css({\n      display: ''\n    });\n    var options = this.layout.options;\n    var onTransitionEnd = {};\n    var transitionEndProperty = this.getHideRevealTransitionEndProperty('visibleStyle');\n    onTransitionEnd[transitionEndProperty] = this.onRevealTransitionEnd;\n    this.transition({\n      from: options.hiddenStyle,\n      to: options.visibleStyle,\n      isCleaning: true,\n      onTransitionEnd: onTransitionEnd\n    });\n  };\n\n  proto.onRevealTransitionEnd = function () {\n    // check if still visible\n    // during transition, item may have been hidden\n    if (!this.isHidden) {\n      this.emitEvent('reveal');\n    }\n  };\n  /**\n   * get style property use for hide/reveal transition end\n   * @param {String} styleProperty - hiddenStyle/visibleStyle\n   * @returns {String}\n   */\n\n\n  proto.getHideRevealTransitionEndProperty = function (styleProperty) {\n    var optionStyle = this.layout.options[styleProperty]; // use opacity\n\n    if (optionStyle.opacity) {\n      return 'opacity';\n    } // get first property\n\n\n    for (var prop in optionStyle) {\n      return prop;\n    }\n  };\n\n  proto.hide = function () {\n    // set flag\n    this.isHidden = true; // remove display: none\n\n    this.css({\n      display: ''\n    });\n    var options = this.layout.options;\n    var onTransitionEnd = {};\n    var transitionEndProperty = this.getHideRevealTransitionEndProperty('hiddenStyle');\n    onTransitionEnd[transitionEndProperty] = this.onHideTransitionEnd;\n    this.transition({\n      from: options.visibleStyle,\n      to: options.hiddenStyle,\n      // keep hidden stuff hidden\n      isCleaning: true,\n      onTransitionEnd: onTransitionEnd\n    });\n  };\n\n  proto.onHideTransitionEnd = function () {\n    // check if still hidden\n    // during transition, item may have been un-hidden\n    if (this.isHidden) {\n      this.css({\n        display: 'none'\n      });\n      this.emitEvent('hide');\n    }\n  };\n\n  proto.destroy = function () {\n    this.css({\n      position: '',\n      left: '',\n      right: '',\n      top: '',\n      bottom: '',\n      transition: '',\n      transform: ''\n    });\n  };\n\n  return Item;\n});","map":{"version":3,"sources":["C:/Users/osos1/reservation-plus/node_modules/outlayer/item.js"],"names":["window","factory","define","amd","module","exports","require","Outlayer","Item","EvEmitter","getSize","isEmptyObj","obj","prop","docElemStyle","document","documentElement","style","transitionProperty","transition","transformProperty","transform","transitionEndEvent","WebkitTransition","vendorProperties","transitionDuration","transitionDelay","element","layout","position","x","y","_create","proto","prototype","Object","create","constructor","_transn","ingProperties","clean","onEnd","css","handleEvent","event","method","type","size","elemStyle","supportedProp","getPosition","getComputedStyle","isOriginLeft","_getOption","isOriginTop","xValue","yValue","parseFloat","layoutSize","indexOf","width","height","isNaN","paddingLeft","paddingRight","paddingTop","paddingBottom","layoutPosition","xPadding","xProperty","xResetProperty","getXValue","yPadding","yProperty","yResetProperty","getYValue","emitEvent","isHorizontal","options","percentPosition","_transitionTo","curX","curY","didNotMove","setPosition","isTransitioning","transX","transY","transitionStyle","getTranslate","to","onTransitionEnd","isCleaning","goTo","moveTo","_nonTransition","args","_removeStyles","call","_transition","from","h","offsetHeight","enableTransition","toDashedAll","str","replace","$1","toLowerCase","transitionProps","duration","staggerDelay","addEventListener","onwebkitTransitionEnd","ontransitionend","onotransitionend","dashedVendorProperties","target","propertyName","disableTransition","removeTransitionStyles","removeEventListener","cleanStyle","cleanTransitionStyle","stagger","delay","removeElem","parentNode","removeChild","display","remove","once","hide","reveal","isHidden","transitionEndProperty","getHideRevealTransitionEndProperty","onRevealTransitionEnd","hiddenStyle","visibleStyle","styleProperty","optionStyle","opacity","onHideTransitionEnd","destroy","left","right","top","bottom"],"mappings":"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","sourcesContent":["/**\n * Outlayer Item\n */\n\n( function( window, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /* globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD - RequireJS\n    define( [\n        'ev-emitter/ev-emitter',\n        'get-size/get-size'\n      ],\n      factory\n    );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS - Browserify, Webpack\n    module.exports = factory(\n      require('ev-emitter'),\n      require('get-size')\n    );\n  } else {\n    // browser global\n    window.Outlayer = {};\n    window.Outlayer.Item = factory(\n      window.EvEmitter,\n      window.getSize\n    );\n  }\n\n}( window, function factory( EvEmitter, getSize ) {\n'use strict';\n\n// ----- helpers ----- //\n\nfunction isEmptyObj( obj ) {\n  for ( var prop in obj ) {\n    return false;\n  }\n  prop = null;\n  return true;\n}\n\n// -------------------------- CSS3 support -------------------------- //\n\n\nvar docElemStyle = document.documentElement.style;\n\nvar transitionProperty = typeof docElemStyle.transition == 'string' ?\n  'transition' : 'WebkitTransition';\nvar transformProperty = typeof docElemStyle.transform == 'string' ?\n  'transform' : 'WebkitTransform';\n\nvar transitionEndEvent = {\n  WebkitTransition: 'webkitTransitionEnd',\n  transition: 'transitionend'\n}[ transitionProperty ];\n\n// cache all vendor properties that could have vendor prefix\nvar vendorProperties = {\n  transform: transformProperty,\n  transition: transitionProperty,\n  transitionDuration: transitionProperty + 'Duration',\n  transitionProperty: transitionProperty + 'Property',\n  transitionDelay: transitionProperty + 'Delay'\n};\n\n// -------------------------- Item -------------------------- //\n\nfunction Item( element, layout ) {\n  if ( !element ) {\n    return;\n  }\n\n  this.element = element;\n  // parent layout class, i.e. Masonry, Isotope, or Packery\n  this.layout = layout;\n  this.position = {\n    x: 0,\n    y: 0\n  };\n\n  this._create();\n}\n\n// inherit EvEmitter\nvar proto = Item.prototype = Object.create( EvEmitter.prototype );\nproto.constructor = Item;\n\nproto._create = function() {\n  // transition objects\n  this._transn = {\n    ingProperties: {},\n    clean: {},\n    onEnd: {}\n  };\n\n  this.css({\n    position: 'absolute'\n  });\n};\n\n// trigger specified handler for event type\nproto.handleEvent = function( event ) {\n  var method = 'on' + event.type;\n  if ( this[ method ] ) {\n    this[ method ]( event );\n  }\n};\n\nproto.getSize = function() {\n  this.size = getSize( this.element );\n};\n\n/**\n * apply CSS styles to element\n * @param {Object} style\n */\nproto.css = function( style ) {\n  var elemStyle = this.element.style;\n\n  for ( var prop in style ) {\n    // use vendor property if available\n    var supportedProp = vendorProperties[ prop ] || prop;\n    elemStyle[ supportedProp ] = style[ prop ];\n  }\n};\n\n // measure position, and sets it\nproto.getPosition = function() {\n  var style = getComputedStyle( this.element );\n  var isOriginLeft = this.layout._getOption('originLeft');\n  var isOriginTop = this.layout._getOption('originTop');\n  var xValue = style[ isOriginLeft ? 'left' : 'right' ];\n  var yValue = style[ isOriginTop ? 'top' : 'bottom' ];\n  var x = parseFloat( xValue );\n  var y = parseFloat( yValue );\n  // convert percent to pixels\n  var layoutSize = this.layout.size;\n  if ( xValue.indexOf('%') != -1 ) {\n    x = ( x / 100 ) * layoutSize.width;\n  }\n  if ( yValue.indexOf('%') != -1 ) {\n    y = ( y / 100 ) * layoutSize.height;\n  }\n  // clean up 'auto' or other non-integer values\n  x = isNaN( x ) ? 0 : x;\n  y = isNaN( y ) ? 0 : y;\n  // remove padding from measurement\n  x -= isOriginLeft ? layoutSize.paddingLeft : layoutSize.paddingRight;\n  y -= isOriginTop ? layoutSize.paddingTop : layoutSize.paddingBottom;\n\n  this.position.x = x;\n  this.position.y = y;\n};\n\n// set settled position, apply padding\nproto.layoutPosition = function() {\n  var layoutSize = this.layout.size;\n  var style = {};\n  var isOriginLeft = this.layout._getOption('originLeft');\n  var isOriginTop = this.layout._getOption('originTop');\n\n  // x\n  var xPadding = isOriginLeft ? 'paddingLeft' : 'paddingRight';\n  var xProperty = isOriginLeft ? 'left' : 'right';\n  var xResetProperty = isOriginLeft ? 'right' : 'left';\n\n  var x = this.position.x + layoutSize[ xPadding ];\n  // set in percentage or pixels\n  style[ xProperty ] = this.getXValue( x );\n  // reset other property\n  style[ xResetProperty ] = '';\n\n  // y\n  var yPadding = isOriginTop ? 'paddingTop' : 'paddingBottom';\n  var yProperty = isOriginTop ? 'top' : 'bottom';\n  var yResetProperty = isOriginTop ? 'bottom' : 'top';\n\n  var y = this.position.y + layoutSize[ yPadding ];\n  // set in percentage or pixels\n  style[ yProperty ] = this.getYValue( y );\n  // reset other property\n  style[ yResetProperty ] = '';\n\n  this.css( style );\n  this.emitEvent( 'layout', [ this ] );\n};\n\nproto.getXValue = function( x ) {\n  var isHorizontal = this.layout._getOption('horizontal');\n  return this.layout.options.percentPosition && !isHorizontal ?\n    ( ( x / this.layout.size.width ) * 100 ) + '%' : x + 'px';\n};\n\nproto.getYValue = function( y ) {\n  var isHorizontal = this.layout._getOption('horizontal');\n  return this.layout.options.percentPosition && isHorizontal ?\n    ( ( y / this.layout.size.height ) * 100 ) + '%' : y + 'px';\n};\n\nproto._transitionTo = function( x, y ) {\n  this.getPosition();\n  // get current x & y from top/left\n  var curX = this.position.x;\n  var curY = this.position.y;\n\n  var didNotMove = x == this.position.x && y == this.position.y;\n\n  // save end position\n  this.setPosition( x, y );\n\n  // if did not move and not transitioning, just go to layout\n  if ( didNotMove && !this.isTransitioning ) {\n    this.layoutPosition();\n    return;\n  }\n\n  var transX = x - curX;\n  var transY = y - curY;\n  var transitionStyle = {};\n  transitionStyle.transform = this.getTranslate( transX, transY );\n\n  this.transition({\n    to: transitionStyle,\n    onTransitionEnd: {\n      transform: this.layoutPosition\n    },\n    isCleaning: true\n  });\n};\n\nproto.getTranslate = function( x, y ) {\n  // flip cooridinates if origin on right or bottom\n  var isOriginLeft = this.layout._getOption('originLeft');\n  var isOriginTop = this.layout._getOption('originTop');\n  x = isOriginLeft ? x : -x;\n  y = isOriginTop ? y : -y;\n  return 'translate3d(' + x + 'px, ' + y + 'px, 0)';\n};\n\n// non transition + transform support\nproto.goTo = function( x, y ) {\n  this.setPosition( x, y );\n  this.layoutPosition();\n};\n\nproto.moveTo = proto._transitionTo;\n\nproto.setPosition = function( x, y ) {\n  this.position.x = parseFloat( x );\n  this.position.y = parseFloat( y );\n};\n\n// ----- transition ----- //\n\n/**\n * @param {Object} style - CSS\n * @param {Function} onTransitionEnd\n */\n\n// non transition, just trigger callback\nproto._nonTransition = function( args ) {\n  this.css( args.to );\n  if ( args.isCleaning ) {\n    this._removeStyles( args.to );\n  }\n  for ( var prop in args.onTransitionEnd ) {\n    args.onTransitionEnd[ prop ].call( this );\n  }\n};\n\n/**\n * proper transition\n * @param {Object} args - arguments\n *   @param {Object} to - style to transition to\n *   @param {Object} from - style to start transition from\n *   @param {Boolean} isCleaning - removes transition styles after transition\n *   @param {Function} onTransitionEnd - callback\n */\nproto.transition = function( args ) {\n  // redirect to nonTransition if no transition duration\n  if ( !parseFloat( this.layout.options.transitionDuration ) ) {\n    this._nonTransition( args );\n    return;\n  }\n\n  var _transition = this._transn;\n  // keep track of onTransitionEnd callback by css property\n  for ( var prop in args.onTransitionEnd ) {\n    _transition.onEnd[ prop ] = args.onTransitionEnd[ prop ];\n  }\n  // keep track of properties that are transitioning\n  for ( prop in args.to ) {\n    _transition.ingProperties[ prop ] = true;\n    // keep track of properties to clean up when transition is done\n    if ( args.isCleaning ) {\n      _transition.clean[ prop ] = true;\n    }\n  }\n\n  // set from styles\n  if ( args.from ) {\n    this.css( args.from );\n    // force redraw. http://blog.alexmaccaw.com/css-transitions\n    var h = this.element.offsetHeight;\n    // hack for JSHint to hush about unused var\n    h = null;\n  }\n  // enable transition\n  this.enableTransition( args.to );\n  // set styles that are transitioning\n  this.css( args.to );\n\n  this.isTransitioning = true;\n\n};\n\n// dash before all cap letters, including first for\n// WebkitTransform => -webkit-transform\nfunction toDashedAll( str ) {\n  return str.replace( /([A-Z])/g, function( $1 ) {\n    return '-' + $1.toLowerCase();\n  });\n}\n\nvar transitionProps = 'opacity,' + toDashedAll( transformProperty );\n\nproto.enableTransition = function(/* style */) {\n  // HACK changing transitionProperty during a transition\n  // will cause transition to jump\n  if ( this.isTransitioning ) {\n    return;\n  }\n\n  // make `transition: foo, bar, baz` from style object\n  // HACK un-comment this when enableTransition can work\n  // while a transition is happening\n  // var transitionValues = [];\n  // for ( var prop in style ) {\n  //   // dash-ify camelCased properties like WebkitTransition\n  //   prop = vendorProperties[ prop ] || prop;\n  //   transitionValues.push( toDashedAll( prop ) );\n  // }\n  // munge number to millisecond, to match stagger\n  var duration = this.layout.options.transitionDuration;\n  duration = typeof duration == 'number' ? duration + 'ms' : duration;\n  // enable transition styles\n  this.css({\n    transitionProperty: transitionProps,\n    transitionDuration: duration,\n    transitionDelay: this.staggerDelay || 0\n  });\n  // listen for transition end event\n  this.element.addEventListener( transitionEndEvent, this, false );\n};\n\n// ----- events ----- //\n\nproto.onwebkitTransitionEnd = function( event ) {\n  this.ontransitionend( event );\n};\n\nproto.onotransitionend = function( event ) {\n  this.ontransitionend( event );\n};\n\n// properties that I munge to make my life easier\nvar dashedVendorProperties = {\n  '-webkit-transform': 'transform'\n};\n\nproto.ontransitionend = function( event ) {\n  // disregard bubbled events from children\n  if ( event.target !== this.element ) {\n    return;\n  }\n  var _transition = this._transn;\n  // get property name of transitioned property, convert to prefix-free\n  var propertyName = dashedVendorProperties[ event.propertyName ] || event.propertyName;\n\n  // remove property that has completed transitioning\n  delete _transition.ingProperties[ propertyName ];\n  // check if any properties are still transitioning\n  if ( isEmptyObj( _transition.ingProperties ) ) {\n    // all properties have completed transitioning\n    this.disableTransition();\n  }\n  // clean style\n  if ( propertyName in _transition.clean ) {\n    // clean up style\n    this.element.style[ event.propertyName ] = '';\n    delete _transition.clean[ propertyName ];\n  }\n  // trigger onTransitionEnd callback\n  if ( propertyName in _transition.onEnd ) {\n    var onTransitionEnd = _transition.onEnd[ propertyName ];\n    onTransitionEnd.call( this );\n    delete _transition.onEnd[ propertyName ];\n  }\n\n  this.emitEvent( 'transitionEnd', [ this ] );\n};\n\nproto.disableTransition = function() {\n  this.removeTransitionStyles();\n  this.element.removeEventListener( transitionEndEvent, this, false );\n  this.isTransitioning = false;\n};\n\n/**\n * removes style property from element\n * @param {Object} style\n**/\nproto._removeStyles = function( style ) {\n  // clean up transition styles\n  var cleanStyle = {};\n  for ( var prop in style ) {\n    cleanStyle[ prop ] = '';\n  }\n  this.css( cleanStyle );\n};\n\nvar cleanTransitionStyle = {\n  transitionProperty: '',\n  transitionDuration: '',\n  transitionDelay: ''\n};\n\nproto.removeTransitionStyles = function() {\n  // remove transition\n  this.css( cleanTransitionStyle );\n};\n\n// ----- stagger ----- //\n\nproto.stagger = function( delay ) {\n  delay = isNaN( delay ) ? 0 : delay;\n  this.staggerDelay = delay + 'ms';\n};\n\n// ----- show/hide/remove ----- //\n\n// remove element from DOM\nproto.removeElem = function() {\n  this.element.parentNode.removeChild( this.element );\n  // remove display: none\n  this.css({ display: '' });\n  this.emitEvent( 'remove', [ this ] );\n};\n\nproto.remove = function() {\n  // just remove element if no transition support or no transition\n  if ( !transitionProperty || !parseFloat( this.layout.options.transitionDuration ) ) {\n    this.removeElem();\n    return;\n  }\n\n  // start transition\n  this.once( 'transitionEnd', function() {\n    this.removeElem();\n  });\n  this.hide();\n};\n\nproto.reveal = function() {\n  delete this.isHidden;\n  // remove display: none\n  this.css({ display: '' });\n\n  var options = this.layout.options;\n\n  var onTransitionEnd = {};\n  var transitionEndProperty = this.getHideRevealTransitionEndProperty('visibleStyle');\n  onTransitionEnd[ transitionEndProperty ] = this.onRevealTransitionEnd;\n\n  this.transition({\n    from: options.hiddenStyle,\n    to: options.visibleStyle,\n    isCleaning: true,\n    onTransitionEnd: onTransitionEnd\n  });\n};\n\nproto.onRevealTransitionEnd = function() {\n  // check if still visible\n  // during transition, item may have been hidden\n  if ( !this.isHidden ) {\n    this.emitEvent('reveal');\n  }\n};\n\n/**\n * get style property use for hide/reveal transition end\n * @param {String} styleProperty - hiddenStyle/visibleStyle\n * @returns {String}\n */\nproto.getHideRevealTransitionEndProperty = function( styleProperty ) {\n  var optionStyle = this.layout.options[ styleProperty ];\n  // use opacity\n  if ( optionStyle.opacity ) {\n    return 'opacity';\n  }\n  // get first property\n  for ( var prop in optionStyle ) {\n    return prop;\n  }\n};\n\nproto.hide = function() {\n  // set flag\n  this.isHidden = true;\n  // remove display: none\n  this.css({ display: '' });\n\n  var options = this.layout.options;\n\n  var onTransitionEnd = {};\n  var transitionEndProperty = this.getHideRevealTransitionEndProperty('hiddenStyle');\n  onTransitionEnd[ transitionEndProperty ] = this.onHideTransitionEnd;\n\n  this.transition({\n    from: options.visibleStyle,\n    to: options.hiddenStyle,\n    // keep hidden stuff hidden\n    isCleaning: true,\n    onTransitionEnd: onTransitionEnd\n  });\n};\n\nproto.onHideTransitionEnd = function() {\n  // check if still hidden\n  // during transition, item may have been un-hidden\n  if ( this.isHidden ) {\n    this.css({ display: 'none' });\n    this.emitEvent('hide');\n  }\n};\n\nproto.destroy = function() {\n  this.css({\n    position: '',\n    left: '',\n    right: '',\n    top: '',\n    bottom: '',\n    transition: '',\n    transform: ''\n  });\n};\n\nreturn Item;\n\n}));\n"]},"metadata":{},"sourceType":"script"}